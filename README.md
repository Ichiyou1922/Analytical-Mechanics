# Analytical-Mechanics
解析力学をプログラミングをしながら学ぶためのリポジトリ

## 第一回(最小作用の原理と変分法)
1. 局所から大域へ
- 運動方程式 $F = ma$ は瞬間に注目する局所的な視点だった．
- 解析力学では「物体は，時刻 $t_{1}~t_{2}$ で移動するとき，作用という物理量が最小になるように経路を選ぶ」と見る．これを最小作用の原理(ハミルトンの原理)と呼ぶ．

2. ラグランジアンと作用
- ラグランジアンLの定義は以下
  - $L(q, \dot q, t)=T-V$ (ただしTは運動エネルギー，Vはポテンシャルエネルギー)

- 作用(S)とは，ラグランジアンを時間で積分したものである．
  - $S[q(t)]=\int_{t_{1}}^{t_{2}}L(q(t), \dot q(t), t)dt$

- 自然界の運動は汎関数(S)の変分 $\delta S$ が $\delta S=0$ を満たすような経路を通る．
  - このことから *オイラーラグランジュ方程式* が導かれる．

### 変分法
- 微分と似た概念ではあるが，極値を考える対称が違う．
  - 微分->関数の極値を考え，変化するのは変数
  - 変分->汎関数の極値を考え，変化するのは関数形

- 今回，Sは汎関数．
  - $S[q(t)]=\int_{t_{1}}^{t_{2}}L(q(t), \dot q(t), t)dt$
  - 積分だから，最後の合計値さえ変わらなければその過程の関数の形が変わってもいいと考える．

3. なぜ $L=T-V$ ？
- $S=\int_{t_{1}}^{t_{2}}(T-V)dt$ を最小化するとは？
  - $\int Tdt$ を小さくする->できるだけゆっくり，最短距離で動きたい．
  - $-\int Vdt$ を小さくする( $\int Vdt$ を大きくしたい)->できるだけポテンシャルが高いところにいたい．
  - この二つの要求の妥協した形が実際の軌道．

### calculus of variation
- 変分をプログラミングで再現する．
- なぜ配列要素数がN+1？
  - 植木算と呼ばれる．
  - 配列を用いて取得したいのは「点」ではなく「区間」だから，始点と終点の情報が必要になる．もし要素数がNだったら，最後のゴール地点のデータが格納できなくなる．

- なぜT_END=1.42877?
  - $y(t)=H-\frac{1}{2}gt^2$ でH=10としたとき，地面に到達する時間は大体これくらいの時間．

- なぜ直線の方程式を $y(t)=H-H(\frac{t}{T_{end}})$ にしたのか？
  - 変形すると $y(t)=H(1-\frac{t}{T_{end}})$ 
  - t=0の時y=H, $t=T_{end}$ の時y=0．
  - $T_{end}$ で割るという操作は時間を正規化する処理．この処理のおかげで，時刻 $T_{end}$ に置いて，ちょうどH分だけ下がりきる直線が表現できる．

- 作用Sの計算関数の実装
  - 本来積分で表されるものを離散化して和に変換する．
  - 隣り合う点i, i+1の間の区間におけるラグランジアンを考える．
1. 速度vの近似
  - 区間の平均速度は $v_{i} \approx \frac{v_{i+1}-v_{i}}{dt}$ 
  - $T = \frac{1}{2}m(\frac{v_{i+1}-v_{i}}{dt})^2$
2. 高さhの平均をとる $h_{mean} = \frac{y_{i+1}+y_{i}}{2}$
  - $V = mg(\frac{y_{i+1}+y_{i}}{2})$
3. 部分作用 $S_{i}$
  - ラグランジアンに時間幅dtを掛ける(積分の近似)
  - $S_{i}=(T-V)dt$
  - whileでi=0からN-1まで回してsumに足しこんでいく．Nまで回すとi+1であふれるから注意．

- 局所性
  - ある点 $y_{i}$ はその直前の区間と直後の区間のラグラジアンにしか影響を与えない．これを*局所性*という.
  - ここから，全区間の積分ではなく，局所的な微分方程式で運動を記述できることがわかる．

### オイラーラグランジュ方程式の離散的導出
- 作用Sを $y_{i}$ について偏微分し，その結果を=0とする．
- $m\frac{y_{i+1}-2y_{i}+y_{i-1}}{(\delta t)^2}=-mg$ が導かれる．
- 左辺の  $\frac{y_{i+1}-2y_{i}+y_{i-1}}{(\delta t)^2}$ は加速度の離散近似になっている．
- 運動方程式ma=Fが作用最小の原理から自動的に導かれた．

## 第二回: 一般化座標とオイラーラグランジュ方程式
- ニュートン力学では極座標や回転座標系を使うと，遠心力やコリオリ力などの「見かけの力」を考えなければいけなかった．
- 解析力学ではラグランジアン $L(q, \dot q)$ さえわかれば機械的に正しい運動方程式が得られる．

### 形式化
- 一般化座標を $q_{k}(k=1, ..., n)$ とすれば，オイラーラグランジュ方程式は以下．
- $\frac{d}{dt}(\frac{\partial L}{\partial \dot q_{k}})-\frac{\partial L}{\partial \dot q_{k}}=0$

- 単振子(pendulum)
1. 座標: 角度θを一般化座標qとする．
2. 速度: 質点の速度 $v = l \dot \theta$
3. 高さ: 最下点を基準にすると $h=l-lcos\theta$
